GPP = clang++

CFLAGS = -ferror-limit=100 -w -std=c++2a -I /usr/local/include -I include -g -fsanitize=address -Wl  #-O3 -march=native -mtune=native 

ifeq ($(OS),Windows_NT)
	AR = llvm-ar
	RM = del 
	LIBNAME = fan_windows_clang.a
else
	CFLAGS += -DFAN_INCLUDE_PATH=/usr/include
	AR = ar
	RM = rm -f
	LIBNAME = fan.a
endif

ifeq ($(OS),Windows_NT)
	CFLAGS +=  -I src/libwebp -I src/libwebp/src
endif

FAN_OBJECT_FOLDER = 

LIBS = fan_main.o fan_window.o
TARGET = a.out

MAIN = Source.cpp

$(TARGET): $(LIBS)
	$(GPP) $(CFLAGS) $(LIBS) $(MAINFLAGS) -o $(TARGET)
	
fan_main.o:	$(MAIN)
	$(GPP) $(CFLAGS) -c $(MAIN) -o fan_main.o

fan_window.o:  src/fan/window/window.cpp
	$(GPP) $(CFLAGS) -c src/fan/window/window.cpp -o $(FAN_OBJECT_FOLDER)fan_window.o
	
clean:
	$(RM) fan_*.o

run:	$(LIBS)
	$(AR) rvs $(LIBNAME) $(LIBS)